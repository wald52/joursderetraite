<!DOCTYPE html>
<html lang="fr" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description"
        content="Combien de temps repr√©sente un montant en ann√©es, mois, jours de retraites vers√©es en France ?">
    <title>Jours de Retraite</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">

    <!-- Open Graph -->
    <meta property="og:title" content="Jours de Retraite">
    <meta property="og:description"
        content="D√©couvrez l'√©quivalent temps de cotisations de retraite pour n'importe quel montant.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="/icon-512x512.png">
    <meta property="og:locale" content="fr_FR">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Jours de Retraite">
    <meta name="twitter:description"
        content="D√©couvrez l'√©quivalent temps de cotisations de retraite pour n'importe quel montant.">
    <meta name="twitter:image" content="/icon-512x512.png">

    <!-- Font Awesome & Tailwind -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        navy: {
                            900: '#0a192f',
                            800: '#112240',
                            700: '#1d3557',
                        },
                        gold: {
                            400: '#e6c55a',
                            500: '#d4af37',
                        }
                    }
                }
            }
        }
    </script>
    <script type="module" src="js/main.js"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0a192f">
</head>

<body>
    <div class="app-container">
        <!-- Bulles d√©coratives -->
        <div class="bubbles">
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
            <div class="bubble"></div>
        </div>

        <main class="main-content">
            <!-- Header avec bateau stylis√© -->
            <header class="header">
                <div class="header-content">
                    <img src="bateaucoisiere.png" alt="Bateau de croisi√®re" class="header-boat" />
                    <div class="header-text">
                        <h1 class="header-title">Jours de Retraite</h1>
                        <p class="header-subtitle">D√©couvrez les √©quivalents des retraites vers√©es en France en 2025</p>
                    </div>
                </div>
            </header>

            <!-- Toggle de mode -->
            <div class="mode-toggle">
                <button id="temporal-mode-btn" class="mode-toggle-btn active" onclick="switchMode('temporal')">
                    <i class="fas fa-clock mr-1"></i>Temporel
                </button>
                <button id="financial-mode-btn" class="mode-toggle-btn" onclick="switchMode('financial')">
                    <i class="fas fa-chart-line mr-1"></i>Financier
                </button>
            </div>

            <!-- MODE TEMPOREL -->
            <div id="temporal-inputs">
                <!-- Carte montant -->
                <div class="card">
                    <div class="card-label">üí∞ Montant √† convertir</div>
                    <div class="input-wrapper">
                        <input type="text" inputmode="numeric" pattern="[0-9.,]*" id="amount"
                            placeholder="Ex: 24 000 000" class="input-field"
                            oninput="allowOnlyNumbersAndComma(this); formatNumberInput(this); handleInput()"
                            onblur="formatNumberOnBlur(this)">
                        <i class="fas fa-euro-sign input-icon"></i>
                    </div>
                </div>

                <!-- Bouton exemple -->
                <div class="example-section">
                    <button class="example-btn" onclick="setRandomExample()">
                        <i class="fas fa-lightbulb"></i>
                        <span>Charger un exemple</span>
                    </button>
                    <p id="current-example" class="current-example"></p>
                </div>

                <!-- Bouton calculer -->
                <div class="btn-group">
                    <button class="btn btn-primary"
                        onclick="formatNumberOnBlur(document.getElementById('amount')); calculate();">
                        <i class="fas fa-calculator"></i>
                        Calculer
                    </button>
                    <button class="btn btn-secondary" onclick="resetForm()">
                        <i class="fas fa-redo"></i>
                        Effacer
                    </button>
                </div>

                <!-- R√©sultat temporel -->
                <div id="result-section-temporal" class="result-section hidden">
                    <div class="result-card">
                        <button class="copy-btn" onclick="copyResult('temporal')">
                            <i class="fas fa-copy"></i>
                        </button>
                        <div class="result-label">‚è±Ô∏è √âquivalent retraite</div>
                        <div id="result-text-temporal" class="result-value"></div>

                    </div>

                    <div class="share-section">
                        <div class="share-buttons">
                            <button class="share-btn facebook" onclick="shareOnSocial('facebook')" title="Facebook">
                                <i class="fab fa-facebook-f"></i>
                            </button>
                            <button class="share-btn twitter" onclick="shareOnSocial('twitter')" title="X">
                                <i class="fab fa-twitter"></i>
                            </button>
                            <button class="share-btn nostr" onclick="shareOnSocial('nostr')" title="Nostr">
                                <img src="nostr-logo.png" alt="Nostr" class="share-icon-img">
                            </button>
                            <button class="share-btn linkedin" onclick="shareOnSocial('linkedin')" title="LinkedIn">
                                <i class="fab fa-linkedin-in"></i>
                            </button>
                            <button class="share-btn instagram" onclick="shareOnSocial('instagram')" title="Instagram">
                                <i class="fab fa-instagram"></i>
                            </button>
                            <button class="share-btn tiktok" onclick="shareOnSocial('tiktok')" title="TikTok">
                                <i class="fab fa-tiktok"></i>
                            </button>
                            <button class="share-btn discord" onclick="shareOnSocial('discord')" title="Discord">
                                <i class="fab fa-discord"></i>
                            </button>
                            <button class="share-btn" onclick="shareVia('email')" title="Email">
                                <i class="fas fa-envelope"></i>
                            </button>
                            <button class="share-btn" onclick="shareVia('sms')" title="SMS">
                                <i class="fas fa-comment-sms"></i>
                            </button>
                            <button class="share-btn native" onclick="nativeShare('temporal')">
                                <i class="fas fa-share"></i>
                                <span>Partager</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- MODE FINANCIER -->
            <div id="financial-inputs" class="hidden">
                <div class="card">
                    <div class="card-label">üè∑Ô∏è Type de comparaison</div>
                    <div class="input-wrapper">
                        <select id="object-type" class="input-field" onchange="updateObjectPrice()">
                            <option value="">S√©lectionnez un objet...</option>
                            <option value="EPR" data-price="24000000000">EPR - Centrale nucl√©aire (24 Mds ‚Ç¨)</option>
                            <option value="Sous-marin" data-price="9000000000">Sous-marin nucl√©aire (9 Mds ‚Ç¨)</option>
                            <option value="Porte-avions" data-price="10000000000">Porte-avions (10 Mds ‚Ç¨)</option>
                            <option value="JO" data-price="6600000000">JO Paris 2024 (6,6 Mds ‚Ç¨)</option>
                            <option value="Villa" data-price="2500000000">Villa Monaco (2,5 Mds ‚Ç¨)</option>
                            <option value="Yacht" data-price="60000000">Yacht luxe (60 M‚Ç¨)</option>
                            <option value="Mbapp√©" data-price="40000000">Salaire Mbapp√© (40 M‚Ç¨)</option>
                            <option value="PDG" data-price="80000000">PDG CAC 40 (80 M‚Ç¨)</option>
                            <option value="Minist√®re Arm√©es" data-price="59946338573">Arm√©es 2025 (59,9 Mds ‚Ç¨)</option>
                            <option value="Minist√®re √âducation" data-price="88642000013">√âducation 2025 (88,6 Mds ‚Ç¨)
                            </option>
                            <option value="Tunnel Manche" data-price="15000000000">Tunnel Manche (15 Mds ‚Ç¨)</option>
                            <option value="Apollo" data-price="280000000000">Apollo (280 Mds ‚Ç¨)</option>
                            <option value="Station spatiale" data-price="150000000000">ISS (150 Mds ‚Ç¨)</option>
                            <option value="ITER" data-price="25000000000">ITER (25 Mds ‚Ç¨)</option>
                            <option value="Millau" data-price="400000000">Pont Millau (400 M‚Ç¨)</option>
                            <option value="Tour Eiffel" data-price="10000000">Tour Eiffel (10 M‚Ç¨)</option>
                            <option value="Fortune Arnault" data-price="250000000000">Fortune Arnault (250 Mds ‚Ç¨)
                            </option>
                            <option value="PIB France" data-price="3000000000000">PIB France (3.000 Mds ‚Ç¨)</option>
                            <option value="autre">Autre objet personnalis√©...</option>
                        </select>
                    </div>

                    <div id="custom-object-input" class="hidden">
                        <input type="text" id="object-name" placeholder="Nom de l'objet" class="input-field"
                            style="padding-left: 1rem;">
                    </div>

                    <div class="card-label">üíµ Montant √† convertir</div>
                    <div class="input-wrapper">
                        <input type="text" inputmode="numeric" id="object-price" placeholder="24 000 000"
                            class="input-field" oninput="allowOnlyNumbersAndComma(this); formatNumberInput(this)"
                            onblur="formatNumberOnBlur(this)">
                        <i class="fas fa-euro-sign input-icon"></i>
                    </div>

                    <div class="card-label">üìÖ P√©riode de retraite</div>
                    <div class="input-wrapper">
                        <select id="time-period" class="input-field">
                            <option value="1">1 an</option>
                            <option value="0.5">6 mois</option>
                            <option value="0.25">3 mois</option>
                            <option value="0.1">1 mois</option>
                            <option value="0.033">10 jours</option>
                            <option value="0.01">1 jour</option>
                            <option value="custom">Personnalis√©...</option>
                        </select>
                    </div>

                    <div id="custom-period-container" class="hidden">
                        <input type="text" inputmode="numeric" id="custom-period" placeholder="Dur√©e en ann√©es"
                            class="input-field" value="1">
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary" onclick="calculateComparison()">
                        <i class="fas fa-exchange-alt"></i>
                        Comparer
                    </button>
                </div>

                <!-- R√©sultat financier -->
                <div id="result-section-financial" class="result-section hidden">
                    <div class="result-card">
                        <button class="copy-btn" onclick="copyResult('financial')">
                            <i class="fas fa-copy"></i>
                        </button>
                        <div id="result-text-financial" class="result-value"></div>
                        <div id="comparison-result-text-financial" class="hidden"></div>
                    </div>

                    <div class="share-section">
                        <div class="share-buttons">
                            <button class="share-btn facebook" onclick="shareOnSocial('facebook')" title="Facebook">
                                <i class="fab fa-facebook-f"></i>
                            </button>
                            <button class="share-btn twitter" onclick="shareOnSocial('twitter')" title="X">
                                <i class="fab fa-twitter"></i>
                            </button>
                            <button class="share-btn nostr" onclick="shareOnSocial('nostr')" title="Nostr">
                                <img src="nostr-logo.png" alt="Nostr" class="share-icon-img">
                            </button>
                            <button class="share-btn linkedin" onclick="shareOnSocial('linkedin')" title="LinkedIn">
                                <i class="fab fa-linkedin-in"></i>
                            </button>
                            <button class="share-btn instagram" onclick="shareOnSocial('instagram')" title="Instagram">
                                <i class="fab fa-instagram"></i>
                            </button>
                            <button class="share-btn tiktok" onclick="shareOnSocial('tiktok')" title="TikTok">
                                <i class="fab fa-tiktok"></i>
                            </button>
                            <button class="share-btn discord" onclick="shareOnSocial('discord')" title="Discord">
                                <i class="fab fa-discord"></i>
                            </button>
                            <button class="share-btn" onclick="shareVia('email')" title="Email">
                                <i class="fas fa-envelope"></i>
                            </button>
                            <button class="share-btn" onclick="shareVia('sms')" title="SMS">
                                <i class="fas fa-comment-sms"></i>
                            </button>
                            <button class="share-btn native" onclick="nativeShare('financial')">
                                <i class="fas fa-share"></i>
                                <span>Partager</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Accord√©on M√©thodologie -->
            <div class="accordion" id="methodology-section">
                <div class="accordion-header" onclick="toggleMethodology()">
                    <span class="accordion-title">
                        <i class="fas fa-calculator methodology-icon"></i>
                        M√©thodologie
                    </span>
                    <i class="fas fa-chevron-down accordion-icon"></i>
                </div>
                <div class="accordion-content">
                    <div class="accordion-body">
                        <div class="infography">
                            <svg viewBox="0 0 320 110" preserveAspectRatio="xMidYMid meet">
                                <!-- Styles internes pour SVG -->
                                <style>
                                    .step-box {
                                        fill: rgba(255, 255, 255, 0.05);
                                        stroke: rgba(255, 255, 255, 0.1);
                                        stroke-width: 1;
                                        rx: 8;
                                    }

                                    .step-label {
                                        font-size: 9px;
                                        fill: var(--gray-400);
                                        font-weight: 600;
                                        text-transform: uppercase;
                                    }

                                    .step-value {
                                        font-size: 12px;
                                        fill: var(--white);
                                        font-family: 'JetBrains Mono', monospace;
                                        font-weight: 700;
                                    }

                                    .operator {
                                        font-size: 14px;
                                        fill: var(--gold-400);
                                        font-weight: bold;
                                    }

                                    .final-box {
                                        fill: rgba(212, 175, 55, 0.1);
                                        stroke: var(--gold-400);
                                        stroke-width: 2;
                                        rx: 8;
                                    }

                                    .arrow {
                                        stroke: var(--gold-400);
                                        stroke-width: 1.5;
                                        marker-end: url(#arrowHead);
                                    }
                                </style>

                                <defs>
                                    <marker id="arrowHead" markerWidth="6" markerHeight="6" refX="5" refY="3"
                                        orient="auto">
                                        <path d="M0,0 L6,3 L0,6 Z" fill="#d4af37" />
                                    </marker>
                                </defs>

                                <!-- √âtape 1: Montant -->
                                <rect x="5" y="15" width="85" height="50" class="step-box" />
                                <text x="47.5" y="35" text-anchor="middle" class="step-label">MONTANT</text>
                                <text x="47.5" y="53" text-anchor="middle" class="step-value" fill="#d4af37">X ‚Ç¨</text>

                                <!-- Op√©rateur / -->
                                <text x="100" y="45" text-anchor="middle" class="operator">√∑</text>

                                <!-- √âtape 2: Total -->
                                <rect x="110" y="15" width="90" height="50" class="step-box" />
                                <text x="155" y="35" text-anchor="middle" class="step-label">TOTAL</text>
                                <text x="155" y="53" text-anchor="middle" class="step-value">420 Mds ‚Ç¨</text>

                                <!-- Op√©rateur = -->
                                <line x1="210" y1="40" x2="225" y2="40" class="arrow" />

                                <!-- √âtape 3: R√©sultat -->
                                <rect x="235" y="10" width="80" height="60" class="final-box" />
                                <text x="275" y="33" text-anchor="middle" class="step-label"
                                    style="fill: var(--gold-400);">DUR√âE</text>
                                <text x="275" y="55" text-anchor="middle" class="step-value"
                                    style="font-size: 14px; fill: var(--gold-400);">XX Jours</text>

                                <!-- Annotation explicative bas -->
                                <text x="160" y="85" text-anchor="middle" font-size="9" fill="#6c757d"
                                    font-style="italic">
                                    (Montant / 420 Milliards) √ó 365.25 jours
                                </text>

                                <!-- Source -->
                                <text x="160" y="100" text-anchor="middle" font-size="8" fill="#4a5568">
                                    Source: Pensions vers√©es (CNAV/Agirc-Arrco 2025)
                                </text>
                            </svg>
                        </div>

                        <div class="mt-3 text-sm"
                            style="color: var(--gray-400); font-size: 0.85rem; line-height: 1.6; text-align: center;">
                            <p>Le calcul compare votre montant au budget annuel des retraites fran√ßaises (<strong
                                    style="color: var(--gold-400);">420 milliards ‚Ç¨</strong>).</p>
                            <p class="mt-1">Le r√©sultat exprime ce que ce montant repr√©sente en <span
                                    style="color: var(--white); font-weight: 500;">temps de versement</span> pour
                                l'ensemble des retrait√©s.</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Snackbar PWA -->
    <div id="pwa-snackbar" class="snackbar hidden">
        <span class="snackbar-text">Installez l'app pour un acc√®s rapide !</span>
        <button class="snackbar-btn" onclick="promptInstall()">Installer</button>
        <button class="snackbar-close" onclick="dismissSnackbar()">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <!-- Installation PWA (bouton flottant subtil) -->
    <div id="install-fab" class="hidden" style="position: fixed; bottom: 5rem; right: 1rem; z-index: 999;">
        <button onclick="promptInstall()"
            style="width: 3rem; height: 3rem; border-radius: 50%; background: linear-gradient(135deg, #d4af37, #e6c55a); border: none; cursor: pointer; box-shadow: 0 4px 20px rgba(212, 175, 55, 0.4); display: flex; align-items: center; justify-content: center;">
            <i class="fas fa-download" style="color: #0a192f; font-size: 1rem;"></i>
        </button>
    </div>
</body>

</html>